**Open Systems Interconnections** - это, по сути, справочная система, определяющая, как компьютеры взаимодействуют друг с другом по сети.

Если представить это в терминах кодирования, то получится **инкапсуляция** - каждый слой - это класс с некоторой основной функциональностью, и каждый класс взаимодействует только с классом выше или ниже его. НЕЛЬЗЯ ПЕРЕСКАКИВАТЬ ЧЕРЕЗ УРОВНИ.
![[Pasted image 20250322213924.png]]
### Семь уровней:
- **Прикладной уровень (Application Layer)** - этом уроне работают привычные для нас приложения — e-mail, браузеры по протоколу HTTP, FTP и остальное. Но это не уровень приложений, это уровень протоколов их взаимодействия.
    
- **Уровень представления (Presentation Layer)** - выполняет три основные функции:
	- _Шифрование и дешифрование_ по протоколу [[TLS]] (Transport Layer Security). Шифрует мои данные и отвечает за расшифровку запросов, поступающих с других серверов, для использования на прикладном уровне.
	- _Сериализация и десериализация_ - перевод данных в формы, понятные приложению или наоборот в простые структуры для передачи на нижний уровень.
	- _Сжатие_ данных без потерь
    
- **Сеансовый уровень (Session Layer)** -  отвечает за открытие, закрытие и поддержание соединений между клиентом и сервером. В реальной жизни этот уровень практически не существует и является частью транспортного уровня
    
- **Транспортный уровень (Transport Layer)** - обычно определяется в зависимости от используемого протокола. Данные на этом уровне называются сегментами
	- Transmission Control Protocol (TCP) - используется в приложениях, которые требуют, чтобы все пакеты не содержали ошибок.
	- User Datagram Protocol (UDP) - используется когда вам неважно, потеряете ли вы несколько пакетов, например, при передаче потокового видео.
    
- **Сетевой уровень (Network Layer)** - отвечает за передачу пакетов из сети в сеть, то есть за маршрутизацию. IP берет сегменты из транспортного протокола и добавляет метаданные, которые помогают определить, где находится ваш клиент в локальной сети. Здесь данные называются пакетами.
    
- **Канальный уровень (Data Link Layer)** - берет на себя задачу адресации в пределах локальной сети, обнаруживает ошибки, проверяет целостность данных. Состоит из двух частей:
	- Logical Link Layer (LLC) - этот уровень обеспечивает управление потоком, подтверждение и обработку ошибок в случае, если что-то пошло не так.
	- Media Access Control (MAC) - этот уровень отвечает за присвоение уникального идентификационного номера, основанного на вашей сетевой карте, называемого MAC-адресом. Это означает, что ни одно устройство не имеет одинакового MAC-адреса.
	Пакеты берутся с сетевого уровня и инкапсулируются с добавлением новых заголовков для MAC-адресов клиента и сервера. В конце пакета добавляется еще одно подмножество данных, которое используется для обнаружения ошибок. Это называется хвостом. После добавления этих метаданных данные теперь называются кадром.
    
- **Физический уровень (Physical Layer)** - преобразовает кадры в байты (8 бит) и отправить их по какому-либо способу транспортировки (электричество, волны, свет и так далее).

В итоге наш запрос будет передан на сервер, а сервер пройдет через тот же процесс, но в обратном порядке.



### Пример работы
1) Представим ситуацию, что вы сидите у себя дома за компьютером, а в соседней комнате у вас свой локальный веб-сервер. И вот вам понадобилось скачать файл с него. Вы набираете адрес страницы вашего сайта. Сейчас вы используете протокол HTTP, которые работает на прикладном уровне. Данные упаковываются и спускаются на уровень ниже.  
  
2) Полученные данные прибегают на уровень представления. Здесь эти данные структурируются и приводятся в формат, который сможет быть прочитан на сервере. Запаковывается и спускается ниже.  
  
3) На этом уровне создается сессия между компьютером и сервером.  
  
4) Так как это веб сервер и требуется надежное установление соединения и контроль за принятыми данными, используется протокол TCP. Здесь мы указываем порт, на который будем стучаться и порт источника, чтобы сервер знал, куда отправлять ответ. Это нужно для того, чтобы сервер понял, что мы хотим попасть на веб-сервер (стандартно — это 80 порт), а не на почтовый сервер. Упаковываем и спускаем дальше.  
  
5) Здесь мы должны указать, на какой адрес отправлять пакет. Соответственно, указываем адрес назначения (пусть адрес сервера будет 192.168.1.2) и адрес источника (адрес компьютера 192.168.1.1). Заворачиваем и спускаем дальше.  
  
6) IP пакет спускается вниз и тут вступает в работу канальный уровень. Он добавляет физические адреса источника и назначения, о которых подробно будет расписано в последующей статье. Так как у нас компьютер и сервер в локальной среде, то адресом источника будет являться MAC-адрес компьютера, а адресом назначения MAC-адрес сервера (если бы компьютер и сервер находились в разных сетях, то адресация работала по-другому). Если на верхних уровнях каждый раз добавлялся заголовок, то здесь еще добавляется концевик, который указывает на конец кадра и готовность всех собранных данных к отправке.  
  
7) И уже физический уровень конвертирует полученное в биты и при помощи электрических сигналов (если это витая пара), отправляет на сервер.  
  
Процесс деинкапсуляции аналогичен, но с обратной последовательностью:  
  
8) На физическом уровне принимаются электрические сигналы и конвертируются в понятную битовую последовательность для канального уровня.  
  
2) На канальном уровне проверяется MAC-адрес назначения (ему ли это адресовано). Если да, то проверяется кадр на целостность и отсутствие ошибок, если все прекрасно и данные целы, он передает их вышестоящему уровню.  
  
3) На сетевом уровне проверяется IP адрес назначения. И если он верен, данные поднимаются выше. Не стоит сейчас вдаваться в подробности, почему у нас адресация на канальном и сетевом уровне. Это тема требует особого внимания, и я подробно объясню их различие позже. Главное сейчас понять, как данные упаковываются и распаковываются.  
  
4) На транспортном уровне проверяется порт назначения (не адрес). И по номеру порта, выясняется какому приложению или сервису адресованы данные. У нас это веб-сервер и номер порта — 80.  
  
5) На этом уровне происходит установление сеанса между компьютером и сервером.  
  
6) Уровень представления видит, как все должно быть структурировано и приводит информацию в читабельный вид.  
  
7) И на этом уровне приложения или сервисы понимают, что надо выполнить.