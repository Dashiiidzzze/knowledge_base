Transmission Control Protocol — один из ключевых и наиболее распространенных протоколов, используемых для транспортировки информации в интернете. Он управляет передачей сведений таким образом, чтобы информация достигала получателя без потерь и в правильном порядке.

задействован на транспортном слое (L4) эталонной модели OSI

#### **Ключевые характеристики и преимущества протокола TCP**
- Высокая надежность. Протокол TCP — гарантия того, что данные будут доставлены в корректном виде туда, куда необходимо.
- Способность управлять потоками информации. Transmission Control Protocol умеет регулировать скорость передачи сведений и транспортировать данные от отправителя к конечному адресату.
- Способность регулировать количество сведений, которые должны быть переданы адресату, но пока не подтверждены. Такая функция называется «окно».
- Наличие алгоритмов переотправки. Протокол поможет отправить данные повторно, если они по каким-то причинам потерялись и не были доставлены адресату.
Также протокол TCP умеет контролировать перегрузку сети, которая может возникнуть из-за слишком большого объема данных, отправленных конкретными узлами.

### **Из каких компонентов состоит пакет протокола TCP**
**1. Порт отправителя (Source Port)**
Это 16-битное поле, которое указывает порт отправителя. Порты используются для идентификации конкретного приложения или процесса на устройстве отправителя.

**2. Порт получателя (Destination Port)**
Это 16-битное поле, которое указывает порт получателя. Порты используются для идентификации конкретного приложения или процесса на устройстве получателя.

**3. Номер последовательности (Sequence Number)**
Это 32-битное поле, которое используется для упорядочивания сегментов данных. Номер последовательности указывает порядковый номер первого байта данных в сегменте.

**4. Номер подтверждения (Acknowledgment Number)**
Это 32-битное поле, которое используется для подтверждения получения данных. Номер подтверждения указывает следующий ожидаемый номер последовательности, который получатель ожидает получить.

**5. Длина заголовка (Header Length)**
Это 4-битное поле, также известное как Data Offset, которое указывает длину заголовка TCP в 32-битных словах. Это поле определяет, где заканчивается заголовок и начинаются данные.

**6. Резерв (Reserved)**
Это 6-битное поле, которое зарезервировано для будущего использования и должно быть установлено в нуль.

**7. Флаги (Flags)**
Это 6-битное поле, которое содержит различные флаги, используемые для управления соединением и передачей данных:
	URG (Urgent): Указывает, что поле Urgent Pointer действительно.
	ACK (Acknowledgment): Указывает, что поле Acknowledgment Number действительно.
	PSH (Push): Указывает, что данные должны быть переданы получателю без буферизации.
	RST (Reset): Указывает, что соединение должно быть сброшено.
	SYN (Synchronize): Указывает, что соединение должно быть установлено.
	FIN (Finish): Указывает, что отправитель завершил передачу данных.

**8. Размер окна (Window Size)**
Это 16-битное поле, которое указывает количество байт, которые отправитель готов принять, начиная с номера подтверждения. Это поле используется для управления потоком данных.

**9. Контрольная сумма (Checksum)**
Это 16-битное поле, которое используется для проверки целостности заголовка и данных. Контрольная сумма вычисляется на основе заголовка и данных сегмента.

**10. Указатель срочности (Urgent Pointer)**
Это 16-битное поле, которое указывает смещение от номера последовательности до последнего срочного байта данных. Это поле действительно только в том случае, если флаг URG установлен.

**11. Опции (Options)**
Это переменное поле, которое может содержать дополнительные параметры, такие как MSS (Maximum Segment Size), Window Scale и Timestamps. Длина этого поля должна быть кратна 32 битам.

**12. Данные (Data)**
Это поле содержит полезную нагрузку, передаваемую между устройствами. Длина данных определяется длиной сегмента минус длина заголовка.

### **Механизм создания соединения**
Протокол TCP для создания стабильного соединения проходит трехступенчатое рукопожатие — Triple Handshake. Если оно пройдет успешно, информация сможет одновременно передаваться по двум каналам.
- Клиент инициирует соединение, то есть отправляет сегмент данных с порядковым номером и флагом SYN.
- Сервер отвечает сегментом с двумя флагами — SYN и ACK. Последний подтверждает, что отправленные инициатором данные были получены. При этом сервер увеличивает порядковый номер принятого сегмента на 1 и записывает это значение в поле номера подтверждения. И последний этап второй ступени рукопожатия — установка произвольного номера для ответного пакета.
- После принятия клиентом фрагмента с SYN+ACK соединение считается установленным. Далее происходит отправка ответного сегмента с ACK и обновленными номерами. Этот пакет не несет смысловой нагрузки — он является проверочным.
То есть идет инициализация -> ответная инициализация и подтверждение, номер +1 -> ответная проверка +1.

Обмен данными по протоколу TCP начинается только после окончания третьей ступени рукопожатия.