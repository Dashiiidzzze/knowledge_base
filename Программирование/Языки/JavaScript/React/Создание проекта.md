`npx create-react-app appName` - создает и настраивает проект
`cd appName` - переход в каталог проекта
`npm start` - запуск приложения (откроется в браузере)

создастся 3 папки:
- public
	в папке public лучше удалить все, кроме index.html и в файле index.html удалить ненужные тэги. Там в `<div id="root"></div>` будет монтироваться приложение.
- src
	лучше удалить все, кроме App.js (внутри app тоже все почистить, оставив нужное) и index.js
- build
	создается при сборке проекта (для его окончательной публикации)
- node_modules
	сюда вообще лезть не надо, клонировать эту папку в реп тоже не нужно

### Загрузка данных с json сервера
`npm install react-router-dom axios` - установка дополнительных зависимостей для того, чтобы отправлять запросы на RESTful API сервис.

`npm install -g json-server` - установка и настройка json-server (выполнять от имени администратора)

`json-server --watch db.json --port 5000` - запуск json-сервера. к нему можно перейти по указанному эндпоинту через браузер или постман. И потом в коде через axios загружать данные:
```JavaScript
import React from 'react';
import axios from 'axios';

let data = [];

async function loadData() {
	try {
		const response = await axios.get("http://localhost:5000/items");
		data = response.data;
		console.log("Данные загружены:", data);
	} catch (error) {
		console.error("Ошибка запроса:", error);
	}
}
```
но лучше загружать данные сразу в состояние State, чтобы они автоматически перезагружались на странице при обновлении.

### Состояние State
`state` (состояние) — это объект в React, который хранит данные, изменяющиеся во времени. Когда `state` обновляется, React **автоматически перерисовывает компонент**.

В функциональных компонентах React `state` создаётся с помощью **`useState`**:
```JSX
const [data, setData] = useState([]);
```
Здесь:
- `data` — текущее значение состояния (изначально пустой массив `[]`).
- `setData(newData)` — функция для обновления состояния.


## Написание кода
React нужно импортировать в каждый файл, где мы создаем компоненты:
`import React from 'react'`. Также в конце каждого компонента пишем его экспорт `export default App;`

#### App.js
Основа проекта будет располагаться в App.js. Туда монтируются все модули и прописываются пути. 
```JavaScript
import React from 'react';
import {BrowserRouter as Router, Routes, Route} from 'react-router-dom';
import Home from './pages/Home';
import Detail from './pages/Detail';
import Form from './pages/Form';
import Logs from './pages/Logs';
import GlobalButtons from './components/GlobalButtons';
import Login from './pages/Login';
import PrivateRoute from './components/PrivateRoute';
import { AuthProvider } from './components/AuthContext';
import './styles/styles.css'; // стили

const App = () => {
	return (
		<AuthProvider>
			<Router>
			<GlobalButtons />
			<Routes>
				<Route path="/login" element={<Login />} />
				<Route path="/" element={<PrivateRoute><Home /></PrivateRoute>} />
				<Route path="/detail/:id" element={<PrivateRoute><Detail /></PrivateRoute>} />
				<Route path="/add" element={<PrivateRoute><Form /></PrivateRoute>} />
				<Route path="/logs" element={<PrivateRoute><Logs /></PrivateRoute>} />
			</Routes>
			</Router>
		</AuthProvider>
	);
};

export default App;
```
Пути можно прописывать только внутри модуля `<Routes>`.
Для доступа к маршрутам только после аутентификации кладем их внутрь модуля `<AuthProvider>`.

#### Pages
В этой папке хранятся компоненты (странички). Дефолтный экспорт должен совпадать с названием файла!!!
```JavaScript
import React, { useState, useEffect } from 'react';
import { Link } from 'react-router-dom';
import { getData, deleteData } from '../components/CheckErrors'; // Импорт API-функций

const Home = () => {
	const [data, setData] = useState([]);
	const [error, setError] = useState(null);
	const [loading, setLoading] = useState(true);
	
	useEffect(() => {
		const loadEmployees = async () => {
			try {
				const employees = await getData("http://localhost:5000/items");
				setData(employees);
				setError(null);
			} catch (err) {
				setError(err.message);
			} finally {
				setLoading(false);
			}
		};
	
		loadEmployees();
	}, []);
	
	const deleteItem = async (id) => {
		try {
			await deleteData(`http://localhost:5000/items/${id}`);
			setData(prevData => prevData.filter(item => item.id !== id));
		} catch (err) {
			setError(err.message);
		}
	};
	
	if (loading) return <p>Загрузка...</p>;
	
	return (
		<div>
			<h1>Список сотрудников</h1>
			<Link className="addition" to="/add">Добавить сотрудника</Link>
			  
			{error && <p className="error">{error}</p>}
			
			<ul>
				{data.map(item => (
					<li key={item.id}>
						<Link to={`/detail/${item.id}``}>{item.name}</Link>
						<button className="delete" onClick={() => deleteItem(item.id)} style={{ marginLeft: "10px" }}>
							Удалить
						</button>
					</li>
				))}
			</ul>
		</div>
	);
};
  
export default Home;
```
Другой файл
```JavaScript
import axios from 'axios';
// DELETE запрос

export const deleteData = async (url) => {
	try {
		await axios.delete(url);
	} catch (error) {
		handleApiError(error);
		throw error;
	}
};

```

### Components
Навигация на глобальных кнопках происходит так
```JavaScript
import React from 'react';
import { useNavigate } from 'react-router-dom';
import { useAuth } from './AuthContext';

const GlobalButtons = () => {
	const navigate = useNavigate();
	const { isAuthenticated, logout } = useAuth();
	
	if (!isAuthenticated) {
		return null; // Не отображаем кнопки, если не авторизован
	}
	
	const handleButtonClick = (button) => {
		if (button === 1) {
			navigate('/');
		} else if (button === 2) {
			navigate('/logs');
		} else if (button === 3) {
			logout(); // Выход из аккаунта
			navigate('/login');
		}
	};
	
	return (
		<div className="global-buttons">
			<button onClick={() => handleButtonClick(1)}>Список сотрудников</button>
			<button onClick={() => handleButtonClick(2)}>Логи проходов</button>
			<button onClick={() => handleButtonClick(3)}>Завершить сессию</button>
		</div>
	);
};

export default GlobalButtons;
```
